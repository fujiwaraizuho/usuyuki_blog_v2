---
import { ghostClient } from '~/libs/ghostClient';
import ArticleArchive from '~/components/molecule/index/ArticleArchive.astro';
const today = new Date();
const firstDay = new Date(today.getFullYear(), today.getMonth() - 1, 1);
const lastDay = new Date(today.getFullYear(), today.getMonth(), 0);
const formatDate = (date) => {
	return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(
		date.getDate()
	).padStart(2, '0')}`;
};

const posts = await ghostClient.posts
	.browse({
		filter: `published_at:>='${formatDate(firstDay)}'+published_at:<='${formatDate(lastDay)}'`,
		order: 'published_at ASC'
	})
	.catch((err: any) => {
		console.error(err);
	});
const postsData = {
	posts: posts
};
---

<ArticleArchive {...postsData} />
